# Архитектура проекта

Проект построен как **Single Page Application (SPA)** без реального бэкенда на текущем этапе. Вся бизнес-логика и хранение данных реализованы на клиенте с использованием браузерного API.

## Стек технологий

- **Frontend Framework**: React 18
- **Build Tool**: Vite
- **Language**: TypeScript
- **Styling**: Tailwind CSS
- **Admin Interface**: React Admin (ra-core, ra-ui-materialui)
- **Routing**: React Router DOM v6
- **Icons**: Lucide React

## Архитектурные решения

### 1. Data Layer (Слой данных)
Вместо REST API используется паттерн **Provider**, эмулирующий работу с сервером.
- **`LocalStorageProvider`**: Класс, реализующий интерфейс `IDatabaseProvider`.
  - Хранит данные в `localStorage` браузера.
  - Имитирует асинхронность (Promise-based API).
  - При первом запуске инициализирует хранилище данными из `src/data/*.ts`.

### 2. Authentication & Authorization (Auth & RBAC)
Система аутентификации разделена на две части:
1.  **Клиентская часть (`AuthContext`)**:
    - Управляет сессией обычного пользователя.
    - Роль определяется на основе email (упрощенная логика для прототипа).
2.  **Административная часть (`authProvider`)**:
    - Специфичный для React Admin провайдер.
    - Поддерживает роли `admin` и `manager`.
    - Хранит токен сессии отдельно в `localStorage`.

### 3. Project Structure (Структура проекта)

```
src/
├── admin/          # React Admin приложение (изолировано)
│   ├── resources/  # Ресурсы админки (Orders, Trailers...)
│   └── ...
├── components/     # Переиспользуемые UI компоненты
├── context/        # React Context (Auth, Theme...)
├── data/           # Статические данные (Mock Data)
├── pages/          # Страницы публичной части сайта
├── services/       # Сервисы (API, Helpers)
│   └── api/        # Реализация LocalStorageProvider
├── types/          # TypeScript интерфейсы
└── ...
```

## Потоки данных

1.  **Инициализация**: `main.tsx` вызывает `db.initializeData()`. Если LS пуст, загружаются моки.
2.  **Чтение**: Компоненты запрашивают данные через `db.getOrders()`, `db.getTrailers()` и т.д.
3.  **Запись**: Действия пользователя (создание заказа) или админа (изменение статуса) вызывают методы `db.save...`, которые обновляют LS.

## Ограничения текущей архитектуры
- Данные хранятся только в браузере текущего пользователя.
- Нет синхронизации между разными устройствами/браузерами.
- Очистка кэша браузера удаляет все созданные заказы и изменения.
